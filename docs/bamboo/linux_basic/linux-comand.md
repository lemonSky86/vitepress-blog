# Linux 命令总结

本篇汇总了常用的 `linux `命令语法以及使用时的注意事项，部分命令结合实例讲解了用法。

## 文件操作相关

### 查看文件项目

命令格式： `ls [选项] [文件或目录]`

```powershell
# ls 命令用于显示目录中的文件及子目录
## 查看当前目录下的文件及子目录
> ls
# 查看当前目录下的文件及子目录, -l 显示文件详细信息
> ls -l
-a    # 显示所有文件及目录，包括以.开头的隐藏文件；
-d    # 仅显示目录名称而不是内容，常用于查看当前目录下的子目录；
-h    # 以人类可读的方式显示文件大小，例如1K、234M、2G；
-l    # 以长格式显示文件或目录的详细信息，也可以简写为: ll;
-m    # 以逗号分隔的方式显示文件或目录的详细信息；
-o    # 以长格式显示文件或目录的详细信息，但不显示用户和组信息；
-p    # 显示文件或目录的权限信息；
-r    # 以递归方式显示文件或目录的详细信息；
-s    # 显示文件或目录的大小；
-t    # 按修改时间排序；
-u    # 按访问时间排序；
-x    # 按文件名排序；
```

### 创建文件

命令格式： `touch [选项] [文件名]`

```powershell
# touch 命令用于创建一个新的空文件或更新已存在文件的时间戳
## 创建名为200801的文件
> touch 200801
## 创建名为200801的文件夹
> mkdir 200801
-a    # 仅更改存取时间；
-c    # 仅更改更改时间；
-d    # 不建立任何文件，仅当所指定的档名不存在时，才建立该档；
-m    # 建立文件时，把文件的权限设为 rw-r--r--；
-p    # 建立目录时，把上一级的目录权限也设为 rw-r--r--；
-t    # 使用指定的日期时间，而非现在的时间；
```

### 复制文件

命令格式： `cp [选项] [源文件或目录] [目标文件或目录]`

```powershell
# cp 命令用于复制文件或目录
## 复制名为 dbback 路径下的 200801.tar 文件到 home 路径下
> cp /dbback/200801.tar /home/

-a    # 保留文件的所有属性，包括权限、时间戳等；
-b    # 覆盖已存在的文件之前先备份；
-d    # 若源文件为目录，则复制目录内的文件；
-f    # 强制覆盖已存在的文件；
-i    # 若目标文件已经存在，则不覆盖，提示用户是否覆盖；
-l    # 保留文件的链接信息；
-p    # 保留文件的权限信息；
-r    # 递归复制目录及其内容；
-s    # 复制文件时保留符号链接；
-u    # 保留文件的访问时间；
```

### 移动文件

命令格式： `mv [选项] [源文件或目录] [目标文件或目录]`

```powershell
# mv 命令用于移动文件或目录
## 移动名为193000_db.zip的文件到 /home/oracle/package/ 路径下
> mv -b 193000_db.zip /home/oracle/package/
## 移动名为200801的文件到200802, -r 递归移动
> mv -r 200801 200802
-a    # 保留文件的所有属性，包括权限、时间戳等；
-b    # 覆盖已存在的文件之前先备份；
-f    # 强制覆盖已存在的文件；
-i    # 若目标文件已经存在，则不覆盖，提示用户是否覆盖；
-l    # 保留文件的链接信息；
-p    # 保留文件的权限信息；
-r    # 递归移动目录及其内容；
-s    # 复制文件时保留符号链接；
-u    # 保留文件的访问时间；
```
::: tip
mv 命令在当前目录下移动文件时也可以重命名文件，格式如下：
```powershell
# 格式： mv 源文件 目标文件
# 例如： mv 200801.tar 200802_01.tar
``` 
:::

### 查看文件内容

命令格式： `cat [选项] [文件名]`

```powershell
# cat 命令用于查看文件内容
## 查看名为200801的文件内容
> cat 200801
## 查看名为200801的文件内容, -n 显示行号
> cat -n 200801
-b    # 显示非空行的行号；
-e    # 显示所有字符，包括不可见字符；
-n    # 显示行号；
-s    # 显示空行；
-t    # 显示制表符；
-v    # 显示非打印字符；
```

### 实时查看文件内容

命令格式： `tail [选项] [文件名]`

```powershell
# tail 命令用于实时查看文件内容
## 查看名为200801的文件内容, -f 实时查看
> tail -f 200801
## 查看名为200801的文件内容, -n 显示行号
> tail -n 10 200801
## 实时查看 tomcat 日志
> tail -f /home/oracle/tomcat/logs/catalina.out
## 选项
-n    # 显示最后n行；
-f    # 实时查看文件内容；
```

### 查看文件大小
命令格式： `du [选项] [文件或目录]`
```powershell
# du 命令用于查看文件或目录的磁盘使用情况
## 查看名为200801的文件或目录的磁盘使用情况
> du 200801
## 查看名为200801的文件或目录的磁盘使用情况, -h 以人类可读的方式显示文件大小
> du -h 200801
-a    # 显示目录中所有文件的磁盘使用情况；
-b    # 以字节为单位显示文件大小；
-c    # 显示每个文件的磁盘使用情况，而不是总和；
-h    # 以人类可读的方式显示文件大小；
-k    # 以千字节为单位显示文件大小；
-m    # 以兆字节为单位显示文件大小；
-s    # 显示每个文件的磁盘使用情况，而不是总和；
-x    # 显示每个文件的磁盘使用情况，而不是总和；
```

### 查看文件权限

命令格式： `ls -l [文件名]`
```powershell
# ls -l 命令用于查看文件或目录的权限信息
## 查看名为200801的文件或目录的权限信息
> ls -l 200801
```

### 查找文件

命令格式： `find [选项] [路径] [条件]`

```powershell
# find 命令用于在文件系统中查找文件或目录
## 在当前目录下查找名为200801的文件或目录
> find . -name 200801
## 在当前目录下查找名为200801的文件或目录, -type f 只查找文件
> find. -name 200801 -type f
## 在当前目录下查找名为200801的文件或目录, -type d 只查找目录
> find. -name 200801 -type d
-name    # 根据文件名查找文件或目录；
-path    # 根据文件路径查找文件或目录；
-type    # 根据文件类型查找文件或目录；
-size    # 根据文件大小查找文件或目录；
-user    # 根据文件所有者查找文件或目录；
-group    # 根据文件所属组查找文件或目录；
-perm    # 根据文件权限查找文件或目录；
-mtime    # 根据文件修改时间查找文件或目录；
-ctime    # 根据文件创建时间查找文件或目录；
-atime    # 根据文件访问时间查找文件或目录；
-exec    # 对查找的文件或目录执行指定的命令；
```

### 压缩文件

命令格式： `tar [选项] [文件名]`

```powershell
# tar 命令用于创建、解压缩文件
## 创建名为200801.tar的文件
> tar -cvf 200801.tar 200801
## 解压缩名为200801.tar的文件
> tar -xvf 200801.tar
## 将文件 output.sql 压缩为 output.tar.gz
> tar -zcvf output.tar.gz output.sql
## 选项
-c    # 创建压缩文件；
-x    # 解压缩文件；
-v    # 显示压缩文件的详细信息；
-f    # 指定压缩文件的名称；
-z    # 使用 gzip 压缩文件；
-j    # 使用 bzip2 压缩文件；
```

### 解压文件

命令格式： `unzip [选项] [文件名]`

```powershell
# unzip 命令用于解压文件
## 解压名为200801.zip的文件
> unzip 200801.zip
## 解压名为200801.zip的文件, -d 指定解压目录
> unzip 200801.zip -d 200801
-d    # 指定解压目录；
-o    # 解压到当前目录；
```

### 授权文件

命令格式： `chmod [选项] [权限] [文件名]`

```powershell
# chmod 命令用于修改文件或目录的权限
## 给名为200801的文件或目录添加读权限
> chmod +r 200801
## 给名为200801的文件或目录添加写权限
> chmod +w 200801
## 给名为200801的文件或目录添加执行权限
> chmod +x 200801
## 给名为200801的文件或目录添加读、写、执行权限
> chmod +rwx 200801
## 给名为200801的文件或目录添加读、写、执行权限
> chmod 777 200801
-r    # 给文件所有者添加读权限；
-w    # 给文件所有者添加写权限；
-x    # 给文件所有者添加执行权限；
-R    # 递归修改子目录的权限；
## 授权 postgres 用户 output.sql 文件读写权限
> chown -R postgres:postgres output.sql
## 授权 oracle 用户文件夹读写权限
> chown -R oracle /home/dbbkup/
```

### 删除文件

命令格式： `rm [选项] [文件名]`

```powershell
#  rm 命令可用来删除文件或文件夹
## 删除名为200801的文件或文件夹
> rm -rf 200801
## 删除以2008开头的文件或文件夹, ‘*’代表模糊匹配
> rm -rf 2008*

-d    # 直接把欲删除的目录的硬连接数据删除成0，删除该目录；
-f    # 强制删除文件或目录；
-i    # 删除已有文件或目录之前先询问用户；
-I    # 删除三个以上文件前或递归删除时提示一次;比-i更少的侵入性，同时仍然提供了对大多数错误的保护
-r或-R    # 递归处理，将指定目录下的所有文件与子目录一并处理；
--preserve-root    # 不对根目录进行递归操作；
-v    # 显示指令的详细执行过程。

```

::: warning 

删除重要文件时，一定要做好备份。

删除文件时一定要进入对应路径下，避免在父级目录直接执行删除操作。

删除文件时一定要指定文件名，非必须不要一次删除大量文件。
:::

### 编辑文件

以下是一个编辑文件的基本步骤。

```powershell
# 1. 使用 vi 命令触发编辑文件
## + 号是进入文件时位置为最后一行
[root@localhost ~]# vi + /etc/sysctl.conf

# 2. 按 i 进行插入，此时出现光标就可以修改内容了
## 将 Linux 服务器的 SYN 队列的长度修改为 2048
--- sysctl.conf 文件内容 ----
# System default settings live in /usr/lib/sysctl.d/00-system.conf.
# To override those settings, enter new settings here, or in an /etc/sysctl.d/<name>.conf file
#
net.ipv4.tcp_max_syn_backlog = 2048
# For more information, see sysctl.conf(5) and sysctl.d(5).
---------------------------

# 3. 按 ESC,光标消失后,键入冒号(:)然后, wq! 保存并退出
:wq!
[root@localhost ~]

```

### 重命名文件或目录

命令格式： `rename [选项] [源文件或目录] [目标文件或目录]`

```powershell
# rename 命令用于重命名文件或目录
## 重命名名为200801的文件或目录为200802
> rename 200801 200802
## 选项
-n    # 不执行重命名操作，仅显示将要被重命名的文件列表；
-v    # 显示详细的输出信息，告知哪些文件被重命名；
-f    # 强制覆盖已经存在的目标文件；
-i    # 交互式重命名，在执行重命名操作之前提示确认；
-d    # 删除指定的文件或目录；
```

### 传输文件

命令格式： `scp [选项] [源文件或目录] [目标文件或目录]`

```powershell
# 两台服务器之间传输文件
# scp local_file remote_username@remote_ip:remote_folder 
scp /home/grid/package/LINUX.X64_193000_grid_home.zip grid@10.159.42.211:/home/grid/package
```

## 磁盘空间相关

### 查看磁盘空间

命令格式： `df [选项] [文件或目录]`

```powershell
# df 命令用于查看磁盘空间使用情况
## 查看磁盘空间使用情况
> df -h
## 查看磁盘剩余空间,会列出所有文件系统的磁盘空间使用情况
> df -hl

# 选项
-a    # 显示所有文件系统的磁盘空间使用情况；
-h    # 查看每个根路径的分区大小(只查根目录)；
-i    # 显示每个文件系统的 inode 数量；
-k    # 以 KB 为单位显示磁盘空间使用情况；
-m    # 以 MB 为单位显示磁盘空间使用情况；
-t    # 显示每个文件系统的类型；
-T    # 显示每个文件系统的类型和挂载点；
-x    # 显示每个文件系统的磁盘空间使用情况，不包括已挂载的文件系统；
```

命令格式： `du [选项] [文件或目录]`

```powershell
# du 命令用于查看文件或目录的磁盘空间使用情况
## 查看指定路径下磁盘空间使用情况
> du -h /home/grid/package
## 查看指定路径的大小
> du -sh /home/grid/package
## 查看路径下所有文件的大小
> du -sm /home/grid/package

# 选项
-a    # 显示所有文件和目录的磁盘空间使用情况；
-h    # 以人类可读的方式显示磁盘空间使用情况；
-s    # 显示指定文件或目录的磁盘空间使用情况；
```

## 防火墙相关

### 查看防火墙状态

命令格式： `firewall-cmd [选项]`

```powershell
# firewall-cmd 命令用于管理和配置防火墙
## 查看防火墙状态
> firewall-cmd --state
# 选项
--state    # 查看防火墙状态；
```

### 查看防火墙规则

命令格式： `firewall-cmd [选项]`

```powershell
# firewall-cmd 命令用于管理和配置防火墙
## 查看防火墙规则
> firewall-cmd --list-all
```

### 查看指定端口是否开放

命令格式： `firewall-cmd [选项]`

```powershell
# firewall-cmd 命令用于管理和配置防火墙
## 查看端口是否开放
> firewall-cmd --zone=public --query-port=80/tcp
```

### 开放指定端口

命令格式： `firewall-cmd [选项]`

```powershell
# firewall-cmd 命令用于管理和配置防火墙
## 开放端口
> firewall-cmd --zone=public --add-port=80/tcp --permanent
## 重新加载防火墙配置
> firewall-cmd --reload
```

::: tip
开放端口后，需要重新加载防火墙配置，否则端口不会立即生效。一般情况下，防火墙会在系统重启时自动加载配置。
:::

### 关闭指定端口

命令格式： `firewall-cmd [选项]`

```powershell
# firewall-cmd 命令用于管理和配置防火墙
## 关闭端口
> firewall-cmd --zone=public --remove-port=80/tcp --permanent
## 重新加载防火墙配置
> firewall-cmd --reload
```

### 关闭防火墙

命令格式： `systemctl [选项]`

```powershell
# systemctl 命令用于管理和配置系统服务
## 关闭防火墙, 根据需要选择下次开机不启动或启动防火墙
> systemctl stop firewalld.service
## 开机不启动防火墙
> systemctl disable firewalld.service
## 开机启动防火墙
> systemctl enable firewalld.service
```

## 进程相关

### 查看服务进程

命令格式： `ps [选项]`

```powershell
# ps 命令用于查看进程
## 查看 java 服务器进程
> ps -ef | grep java
```

### 查看端口占用情况

命令格式： `netstat [选项]`

```powershell
# netstat 命令用于查看网络连接和端口占用情况
## 查看端口占用情况
> netstat -tunlp | grep 8080
```

### 查看进程状态

命令格式： `top [选项]`

```powershell
# top 命令用于实时查看进程状态
## 查看进程状态
> top
## 根据进程号查看进程状态
> top -p 12345
## 根据进程名查看进程状态
> top -c java
## 查看进程内存占用情况
> top -H -p 12345
```

### 杀掉进程

命令格式： `kill [选项]`

```powershell
# kill 命令用于杀掉进程
## 杀掉进程
> kill -9 12345
```

## 网络相关

### 查看网络连接情况

命令格式： `netstat [选项]`

```powershell
# netstat 命令用于查看网络连接和端口占用情况
## 查看网络连接情况
> netstat -tunlp | grep 8080
```

### 查看网络接口信息

命令格式： `ifconfig [选项]`

```powershell
# ifconfig 命令用于查看网络接口信息
## 查看网络接口信息
> ifconfig eth0
```

### 查看路由表

命令格式： `route [选项]`

```powershell
# route 命令用于查看路由表
## 查看路由表
> route -n
```

### 查看 DNS 配置

命令格式： `cat [选项]`

```powershell
# cat 命令用于查看文件内容
## 查看 DNS 配置
> cat /etc/resolv.conf
```

## 内核相关

### 查看内核版本

命令格式： `uname [选项]`

```powershell
# uname 命令用于查看内核版本
## 查看内核版本
> uname -a
## 查看 Linux 版本
> cat /proc/version
```

### 查看内核参数

命令格式： `sysctl [选项]`

```powershell
# sysctl 命令用于查看内核参数
## 查看内核参数
> sysctl -a
```

### 查看系统负载

命令格式： `uptime [选项]`

```powershell
# uptime 命令用于查看系统负载
## 查看系统负载
> uptime
```

### 查看系统内存使用情况

命令格式： `free [选项]`

```powershell
# free 命令用于查看系统内存使用情况
## 查看系统内存使用情况
> free -m 
```